[stream]
# Usage: `mpv --profile=stream video.mp4`
# Use a large, dynamically-growing memory cache. Starts at 150MB, can grow to 500MB.
# This is the most important setting for preventing buffering.
demuxer-max-bytes=500M
demuxer-max-back-bytes=50M
demuxer-readahead-secs=600
cache=yes
cache-on-disk=no
# cache-pause=no
# --- Disable legacy caching options to prevent any other conflicts ---
# cache-secs=600
# cache-bytes=0

# For live streams or slow connections, force a smaller initial cache fill before playback.
# (Optional, uncomment if needed)
# cache-initial=2M

# MPV-level reconnect logic (general)
network-timeout=60
# -- Network and Demuxer Tweaks --
# Automatically retry if the connection is dropped or times out.
demuxer-lavf-o=reconnect=1,reconnect_streamed=1,reconnect_delay_max=30
# Increase the timeout for seeking on slow network streams.
demuxer-seekable-cache=yes
# -- Playback and Quality --
# Enable hardware decoding to save CPU. 'auto-safe' is a good balance.
hwdec=auto-safe
# Use adaptive streaming (DASH/HLS) to automatically select the best quality.
# This lets the player choose the best bitrate based on your connection speed.
ytdl-format="bestvideo[height<=?1080]+bestaudio/best"
# For very low-latency live streams (e.g., Twitch), you might add this.
# Reduces latency but makes you more vulnerable to network stutters.
# profile=low-latency
video-sync=display-resample  # Best for smooth frame timing
interpolation=yes            # Motion interpolation (optional)
tscale=oversample            # For smooth motion (used with interpolation)
# tone-mapping=auto
hdr-compute-peak=yes
gpu-api=vulkan
target-prim=bt.709
target-trc=srgb
tone-mapping=bt.2446a
target-contrast=1100
#tone-mapping=hable
# target-peak=300
